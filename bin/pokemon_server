#!/usr/bin/env python

from pokemon_irc.irc import GMBot, PokeBot
import argparse
from pokemon_irc import settings

bot_list = {}


def create_pokemon(self, pokemon, bot_list=bot_list):
    id = pokemon.id
    player = pokemon.player
    if id in bot_list: raise("jp2gmd")

    p = PokeBot(
       channel=settings.IRC_MAIN_CHANNEL,
       nickname='%s[%s]' % (pokemon_name, player)
    )
    p._connect()
    bot_list[id] = p


def delete_pokemon(self, pokemon, bot_list=bot_list):
    id = pokemon.id
    if id not in bot_list: raise("jp2gmd")
    pokemon = bot_list[id]
    pokemon.disconnect(msg="faints")

    pass


def main():
    g = GMBot()
    g.create_pokemon = create_pokemon
    bot_list['GM'] = g

    for bot in bot_list.values():
        bot._connect()

    while True:
        for bot in bot_list.values():
            bot.ircobj.process_once()


if __name__ == '__main__':
    main()

